#!/usr/bin/env bash
# This script modifies the /etc/hosts file to:
# 1. Resolve localhost to 127.0.0.2
# 2. Resolve facebook.com to 8.8.8.8

# Ensure the script is run as root
if [ "$EUID" -ne 0 ]; then
  echo "Please run as root"
  exit 1
fi

# Backup the original /etc/hosts
cp /etc/hosts /etc/hosts.bak

# Remove old localhost/facebook.com and write to temp file
grep -vE 'localhost|facebook.com' /etc/hosts > /tmp/hosts.tmp

# Add new entries
echo "127.0.0.2 localhost" >> /tmp/hosts.tmp
echo "8.8.8.8 facebook.com" >> /tmp/hosts.tmp

# Overwrite /etc/hosts safely
sudo tee /etc/hosts < /tmp/hosts.tmp >/dev/null
